<div class="p-8 bg-slate-50 min-h-screen font-sans">
  <header class="mb-8 flex justify-between items-end">
    <div>
      <h1 class="text-3xl font-black text-slate-800 tracking-tighter">Historial de Eventos</h1>
      <p class="text-slate-500 font-medium">Registro de telemetrÃ­a y detecciÃ³n de caÃ­das en tiempo real</p>
    </div>
    <div class="text-right">
      <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Filtro Actual</span>
      <p class="text-sm font-black text-blue-600 uppercase">{{ authService.isAdmin() ? 'Red Global' : 'Mis Pacientes' }}</p>
    </div>
  </header>

  <div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-xl overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-slate-900 text-white">
            <th class="px-6 py-4 text-[10px] font-black uppercase tracking-widest">Fecha y Hora</th>
            <th class="px-6 py-4 text-[10px] font-black uppercase tracking-widest">Paciente</th>
            <th class="px-6 py-4 text-[10px] font-black uppercase tracking-widest text-center">AceleraciÃ³n (G)</th>
            <th class="px-6 py-4 text-[10px] font-black uppercase tracking-widest text-center">Estado</th>
            <th class="px-6 py-4 text-[10px] font-black uppercase tracking-widest text-right">AcciÃ³n / Resultado</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-50">
          @for (item of alerts(); track item.id) {
            <tr class="hover:bg-slate-50/80 transition-colors group">
              <td class="px-6 py-4">
                <p class="text-sm font-bold text-slate-700">{{ item.date_rep | date:'dd/MM/yyyy' }}</p>
                <p class="text-[10px] font-medium text-slate-400">{{ item.date_rep | date:'HH:mm:ss' }}</p>
              </td>

              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-xs font-black text-slate-500">
                    {{ item.user_name?.charAt(0) || '?' }}
                  </div>
                  <p class="text-sm font-black text-slate-800">{{ item.user_name || 'Usuario ' + item.user_id }}</p>
                </div>
              </td>

              <td class="px-6 py-4 text-center">
                <div class="flex justify-center gap-2">
                  <span class="px-2 py-1 bg-slate-100 rounded text-[9px] font-bold text-slate-500">X: {{ item.acc_x.toFixed(1) }}</span>
                  <span class="px-2 py-1 bg-slate-100 rounded text-[9px] font-bold text-slate-500">Y: {{ item.acc_y.toFixed(1) }}</span>
                  <span class="px-2 py-1 bg-slate-100 rounded text-[9px] font-bold text-slate-500">Z: {{ item.acc_z.toFixed(1) }}</span>
                </div>
              </td>

              <td class="px-6 py-4 text-center">
                @if (item.fall_detected) {
                  <span class="inline-flex items-center px-3 py-1 rounded-full bg-red-100 text-red-600 text-[10px] font-black uppercase tracking-tighter animate-pulse">
                    ðŸš¨ CaÃ­da Detectada
                  </span>
                } @else {
                  <span class="inline-flex items-center px-3 py-1 rounded-full bg-emerald-100 text-emerald-600 text-[10px] font-black uppercase tracking-tighter">
                    âœ… Normal
                  </span>
                }
              </td>

              <td class="px-6 py-4 text-right">
                @if (!authService.isPaciente()) {
                  @if (item.fall_detected && item.confirmed === null) {
                    <div class="flex justify-end gap-2">
                      <button (click)="onConfirm(item.id, true)" 
                        class="px-4 py-1.5 bg-slate-900 text-white rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-emerald-600 transition-all shadow-lg">
                        Confirmar
                      </button>
                      <button (click)="onConfirm(item.id, false)" 
                        class="px-4 py-1.5 bg-slate-200 text-slate-600 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-slate-300 transition-all">
                        Falsa
                      </button>
                    </div>
                  } @else if (item.confirmed === true) {
                    <span class="text-[10px] font-black text-emerald-500 uppercase italic tracking-widest">âœ“ CaÃ­da Verificada</span>
                  } @else if (item.confirmed === false) {
                    <span class="text-[10px] font-black text-slate-400 uppercase italic tracking-widest">âš  Falsa Alarma</span>
                  } @else {
                    <span class="text-[10px] font-bold text-slate-300 uppercase tracking-widest">Sin acciones</span>
                  }
                } @else {
                  <span class="text-[10px] font-medium text-slate-400">Solo lectura</span>
                }
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    @if (alerts().length === 0) {
      <div class="p-20 text-center">
        <p class="text-4xl mb-4 opacity-20">ðŸ“‚</p>
        <p class="text-slate-400 font-black italic tracking-tighter">No hay registros que mostrar</p>
      </div>
    }
  </div>
</div>