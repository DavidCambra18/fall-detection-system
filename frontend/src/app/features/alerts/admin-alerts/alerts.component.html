<div class="p-4 md:p-8 bg-slate-50 min-h-screen font-sans">
  
  <div class="mb-8 md:mb-10">
    <h1 class="text-2xl md:text-3xl font-black text-slate-800 tracking-tighter uppercase italic leading-none">{{ viewTitle() }}</h1>
    <p class="text-blue-500 font-black text-[9px] uppercase tracking-[0.4em] mt-2 italic">Logs sincronizados: Base de datos en tiempo real</p>
  </div>

  <div class="bg-white p-4 rounded-3xl border border-slate-100 shadow-sm mb-6 flex gap-4 items-center">
    <span class="text-slate-400 ml-2">üîç</span>
    <input type="text" [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event); currentPage.set(1)" 
            placeholder="Buscar por paciente, alias o MAC..." 
            class="flex-1 bg-transparent border-none focus:ring-0 text-sm font-medium text-slate-600 outline-none">
  </div>

  <div class="grid grid-cols-1 gap-4 md:hidden mb-8">
    @for (alert of paginatedAlerts(); track alert.id) {
      <div [ngClass]="alert.fall_detected ? 'border-red-100 bg-red-50/30' : 'bg-white'"
           class="p-6 rounded-4xl border shadow-sm relative overflow-hidden">
        
        <div class="flex justify-between items-start mb-4">
          <div>
            <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest">{{ alert.date_rep | date:'dd/MM/yyyy HH:mm' }}</p>
            <h3 class="font-black text-slate-800 text-base leading-tight mt-1">{{ getDeviceInfo(alert.device_id).owner }}</h3>
          </div>
          <div class="text-right">
            <span [ngClass]="alert.fall_detected ? 'text-red-600' : 'text-emerald-600'" class="text-xs font-black italic">
              {{alert.acc_z}} G
            </span>
          </div>
        </div>

        <div class="bg-white/50 p-3 rounded-xl border border-slate-100 mb-4">
          <p class="text-[10px] font-bold text-slate-600 uppercase tracking-tight">{{ getDeviceInfo(alert.device_id).alias }}</p>
          <p class="text-[9px] text-purple-600 font-mono font-black">{{ getDeviceInfo(alert.device_id).mac }}</p>
        </div>

        @if (alert.fall_detected) {
          <div class="mt-4 pt-4 border-t border-slate-100">
            @if (alert.confirmed === null) {
              <div class="grid grid-cols-2 gap-2">
                <button (click)="onConfirm(alert.id, true)" class="bg-slate-900 text-white py-3 rounded-xl font-black text-[10px] uppercase">‚úì Real</button>
                <button (click)="onConfirm(alert.id, false)" class="bg-white border border-slate-200 text-slate-400 py-3 rounded-xl font-black text-[10px] uppercase">‚úï Falsa</button>
              </div>
            } @else {
              <div class="text-center">
                @if (alert.confirmed === true) {
                  <span class="text-emerald-500 text-[10px] font-black uppercase italic tracking-widest">‚úì Verificada</span>
                } @else if (alert.confirmed === false) {
                  <span class="text-amber-500 text-[10px] font-black uppercase italic tracking-widest">‚ö† Falsa Alarma</span>
                }
              </div>
            }
          </div>
        }
      </div>
    } @empty {
      <div class="p-10 text-center text-slate-400 uppercase font-black text-xs tracking-widest">No hay alertas registradas</div>
    }
  </div>

  <div class="hidden md:block bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden mb-8">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="bg-slate-900 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">
          <th class="px-8 py-6">Fecha / Hora</th>
          <th class="px-8 py-6">Hardware</th>
          <th class="px-8 py-6 text-center">Due√±o / Paciente</th>
          <th class="px-8 py-6 text-center">Eje Z</th>
          <th class="px-8 py-6 text-right">Confirmaci√≥n</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-50">
        @for (alert of paginatedAlerts(); track alert.id) {
          <tr class="hover:bg-slate-50/50 transition-colors">
            <td class="px-8 py-5 text-xs">
              <p class="font-black text-slate-800">{{ alert.date_rep | date:'dd/MM/yyyy' }}</p>
              <p class="text-[9px] text-slate-400 font-bold uppercase">{{ alert.date_rep | date:'HH:mm:ss' }}</p>
            </td>
            <td class="px-8 py-5">
              <div class="flex flex-col">
                <span class="font-black text-slate-700 text-sm tracking-tight leading-none">{{ getDeviceInfo(alert.device_id).alias }}</span>
                <span class="text-[9px] text-purple-600 font-mono font-black mt-1 uppercase">{{ getDeviceInfo(alert.device_id).mac }}</span>
              </div>
            </td>
            <td class="px-8 py-5 text-center">
              <div class="inline-flex items-center px-4 py-2 bg-slate-50 rounded-2xl border border-slate-100">
                <span class="font-black text-slate-700 text-[10px] uppercase">{{ getDeviceInfo(alert.device_id).owner }}</span>
              </div>
            </td>
            <td class="px-8 py-5 text-center font-black" [ngClass]="alert.fall_detected ? 'text-red-600' : 'text-emerald-600'">
              {{alert.acc_z}} G
            </td>
            <td class="px-8 py-5 text-right">
              @if (alert.fall_detected) {
                @if (alert.confirmed === null) {
                  <div class="flex gap-1 justify-end">
                    <button (click)="onConfirm(alert.id, true)" class="w-8 h-8 bg-slate-900 text-white rounded-lg hover:bg-emerald-600 transition-colors shadow-lg">‚úì</button>
                    <button (click)="onConfirm(alert.id, false)" class="w-8 h-8 bg-slate-100 text-slate-400 rounded-lg hover:bg-red-500 hover:text-white transition-colors">‚úï</button>
                  </div>
                } @else if (alert.confirmed === true) {
                  <span class="text-emerald-500 text-[9px] font-black uppercase tracking-[0.2em]">‚úì Verificada</span>
                } @else {
                  <span class="text-amber-500 text-[9px] font-black uppercase tracking-[0.2em]">‚ö† Falsa Alarma</span>
                }
              } @else {
                <span class="text-[8px] text-slate-200 font-black uppercase tracking-widest">Estable</span>
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="flex flex-col sm:flex-row justify-between items-center gap-4 px-4">
    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">P√°gina {{currentPage()}} de {{totalPages()}}</p>
    <div class="flex gap-2 w-full sm:w-auto">
      <button [disabled]="currentPage() === 1" (click)="currentPage.set(currentPage() - 1)" class="flex-1 sm:flex-none px-6 py-3 bg-white border rounded-2xl text-[10px] font-black uppercase disabled:opacity-30">Anterior</button>
      <button [disabled]="currentPage() === totalPages()" (click)="currentPage.set(currentPage() + 1)" class="flex-1 sm:flex-none px-6 py-3 bg-slate-900 text-white rounded-2xl text-[10px] font-black uppercase disabled:opacity-30 shadow-lg">Siguiente</button>
    </div>
  </div>
</div>