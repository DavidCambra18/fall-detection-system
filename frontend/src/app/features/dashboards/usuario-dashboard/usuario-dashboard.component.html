<div class="p-8 bg-slate-50 min-h-screen font-sans">
  <header class="mb-10">
    <h1 class="text-3xl font-black text-slate-800 tracking-tighter uppercase italic leading-none">
      Hola, {{ $any(authService.currentUser())?.name }}
    </h1>
    <p class="text-emerald-500 font-black text-[9px] uppercase tracking-[0.4em] mt-2 italic">Protecci√≥n activa</p>
  </header>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    
    <div class="lg:col-span-2 space-y-6">
      
      @if (showEmergency()) {
        <div class="bg-red-600 rounded-[2.5rem] p-8 shadow-2xl animate-pulse border-4 border-white">
          <div class="flex flex-col md:flex-row items-center justify-between gap-6">
            <div class="flex items-center gap-5">
              <span class="text-4xl">üö®</span>
              <div>
                <h3 class="text-white text-xl font-black uppercase italic leading-none">¬°Atenci√≥n Pendiente!</h3>
                <p class="text-red-100 text-[10px] font-bold uppercase tracking-widest mt-2">Revisa tu historial de actividad</p>
              </div>
            </div>
            <button (click)="irARevisarAlertas()" class="bg-white text-red-600 px-8 py-3 rounded-2xl font-black text-[11px] uppercase tracking-widest hover:bg-slate-100 transition-all shadow-xl">
              REVISAR AHORA üìã
            </button>
          </div>
        </div>
      }

      <div class="bg-white p-10 rounded-[3rem] border border-slate-100 shadow-sm">
        <h2 class="text-2xl font-black text-slate-800 uppercase tracking-tighter mb-8 italic">Estado del Sensor</h2>
        
        <div class="bg-slate-900 rounded-4xl p-8 mb-8">
          <div class="flex items-end gap-2 h-32">
            @for (val of accelData(); track $index) {
              <div [style.height.%]="val" class="flex-1 bg-blue-500/30 rounded-t-lg transition-all duration-500 shadow-[0_0_10px_rgba(59,130,246,0.2)]"></div>
            }
          </div>
        </div>

        <div class="grid grid-cols-2 gap-6">
          <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
            <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 italic">MAC</p>
            <p class="text-sm font-mono font-bold text-slate-700">{{ myDevice()?.mac }}</p>
          </div>
          <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
            <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 italic">Alias</p>
            <p class="text-sm font-bold text-slate-700 uppercase">{{ myDevice()?.alias }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-slate-900 p-8 rounded-[3rem] text-white flex flex-col shadow-2xl shadow-slate-900/20">
      <div class="flex-1">
        <h2 class="text-xl font-black uppercase italic tracking-tighter mb-8">√öltimos Eventos</h2>
        
        <div class="space-y-4">
          @for (alert of recentAlerts(); track alert.id) {
            <div class="bg-white/5 border border-white/10 p-4 rounded-2xl flex items-center justify-between">
              <div>
                <p class="text-[10px] font-black uppercase tracking-tighter" [class.text-red-400]="alert.confirmed === null">
                  {{ alert.fall_detected ? 'Ca√≠da Detectada' : 'Aviso Preventivo' }}
                </p>
                <p class="text-[8px] text-slate-500 font-bold uppercase mt-1">
                  {{ alert.date_rep | date:'HH:mm ¬∑ dd MMM' }}
                </p>
              </div>
              <span class="text-xs">{{ alert.confirmed === null ? '‚ö†Ô∏è' : '‚úÖ' }}</span>
            </div>
          } @empty {
            <div class="py-10 text-center border border-dashed border-white/10 rounded-3xl">
              <p class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em]">Sin actividad reciente</p>
            </div>
          }
        </div>
      </div>

      <button routerLink="/usuario-alerts" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-blue-500 transition-all shadow-lg mt-8">
        Ver Historial Completo
      </button>
    </div>

  </div>
</div>